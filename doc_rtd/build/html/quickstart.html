<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quickstart &#8212; amplicon_sequencing_pipeline_doc  documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Preparing your dataset for processing" href="preparing-dataset.html" />
    <link rel="prev" title="Introduction" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prepare-your-data">
<h2>Prepare your data<a class="headerlink" href="#prepare-your-data" title="Permalink to this headline">¶</a></h2>
<p>To process your data, put all of your files in the same directory
and write your summary file. The summary file contains all of the
instructions for processing that the pipeline will use.</p>
<div class="section" id="summary-file">
<h3>Summary file<a class="headerlink" href="#summary-file" title="Permalink to this headline">¶</a></h3>
<p>The summary file should be called <code class="docutils literal"><span class="pre">summary_file.txt</span></code> and be
tab-delimited.</p>
<p>Summary file attributes tell the processing script what to do.
Attributes should be in all-caps in the first column, and
associated values in the second column.
Attributes should be between <code class="docutils literal"><span class="pre">#16S_start</span></code> and <code class="docutils literal"><span class="pre">#16S_end</span></code>
or <code class="docutils literal"><span class="pre">#ITS_starts</span></code> and <code class="docutils literal"><span class="pre">#ITS_end</span></code> lines.
Everything in the summary file is case-sensitive.
Your summary file must have the following attributes:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">PRIMERS_FILE</span></code>,</li>
<li><code class="docutils literal"><span class="pre">BARCODES_MAP</span></code>,</li>
<li><code class="docutils literal"><span class="pre">PROCESSED</span></code>,</li>
<li>and one of:<ul>
<li><code class="docutils literal"><span class="pre">RAW_FASTQ_FILE</span></code>,</li>
<li><code class="docutils literal"><span class="pre">RAW_FASTQ_FILES</span></code>,</li>
<li><code class="docutils literal"><span class="pre">RAW_FASTA_FILE</span></code>, or</li>
<li><code class="docutils literal"><span class="pre">RAW_FASTA_FILES</span></code>.</li>
</ul>
</li>
</ul>
<p>Your summary file could look like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DATASET_ID</span>  <span class="n">myDataset</span>

<span class="c1">#16S_start</span>
<span class="n">RAW_FASTQ_FILES</span>     <span class="n">fastq_filemap</span><span class="o">.</span><span class="n">txt</span>
<span class="n">PRIMERS_FILE</span>        <span class="n">primers</span><span class="o">.</span><span class="n">txt</span>
<span class="n">PROCESSED</span>           <span class="kc">False</span>
<span class="n">PRIMERS_FILE</span>        <span class="kc">None</span>
<span class="n">BARCODES_MAP</span>        <span class="kc">None</span>
<span class="c1">#16S_end</span>
</pre></div>
</div>
<p>The script considers everything relative to the summary file,
so any relative file paths must be valid with respect to where
your summary file is.</p>
<p>All of the available summary file attributes and their associated
default values are in <a class="reference internal" href="preparing-dataset.html#attribute-list"><span class="std std-ref">List of 16S and ITS attributes</span></a>.</p>
</div>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<p>The pipeline can handle FASTQ and FASTA files. It can also handle
un-demultiplexed data (i.e. reads for all samples are in one file) or
de-multiplexed data (i.e. reads for each sample are in separate files).
It can also handle un-merged paired-end data.</p>
<p>If you have de-multiplexed data, you need to specify a file map
with two columns. The first column has the data files and the
second column has the corresponding sample IDs (see
<a class="reference internal" href="preparing-dataset.html#input-files"><span class="std std-ref">Input file(s)</span></a> for more).</p>
<p>If you need to de-multiplex your data (e.g. remove the barcodes),
you should provide a barcodes map with sample IDs in the first
column and barcodes in the second column (see <a class="reference internal" href="preparing-dataset.html#demultiplexing"><span class="std std-ref">De-multiplexing</span></a>
for more).</p>
<p>In general, none of your auxiliary files should have headers (e.g.
primers, barcodes, and data-to-sample maps).</p>
</div>
</div>
<div class="section" id="run-the-pipeline">
<h2>Run the pipeline<a class="headerlink" href="#run-the-pipeline" title="Permalink to this headline">¶</a></h2>
<p>From anywhere, you can run:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">~/</span><span class="n">scripts</span><span class="o">/</span><span class="n">Master</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">i</span> <span class="o">~/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">summary</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="n">directory</span>
</pre></div>
</div>
<p>If your data will take a while to process, we recommend using
a screen or tmux session.</p>
</div>
<div class="section" id="troubleshooting-and-logs">
<h2>Troubleshooting and logs<a class="headerlink" href="#troubleshooting-and-logs" title="Permalink to this headline">¶</a></h2>
<p>Check both <code class="docutils literal"><span class="pre">stderr_master.log</span></code> and <code class="docutils literal"><span class="pre">stdout_master.log</span></code> in your current directory and the
respective file in <code class="docutils literal"><span class="pre">~/logs</span></code> (e.g. <code class="docutils literal"><span class="pre">stderr_datasetID_proc_16s.log</span></code>).
If you used nohup, also look at nohup.out in your current directory.</p>
<p>The most common problem is messed up white space in one of your files,
for example:</p>
<ul class="simple">
<li>extra tabs in summary files</li>
<li>^M character in your barcodes or fastq file map (has to do with Mac OS&#8217;s newline character)</li>
</ul>
<p>The next most common problem is typos:</p>
<ul class="simple">
<li>check your file paths</li>
<li>check the summary file attributes and values</li>
</ul>
<p>Sometimes the processing can mess up because your data is doing
something unexpected. An easy way to troubleshoot these problems
is to look at file sizes in <code class="docutils literal"><span class="pre">~/proc/yourdataset_proc_16S</span></code>.
File suffixes indicate what&#8217;s been done to each file:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">.pt</span></code> - primer trimmed</li>
<li><code class="docutils literal"><span class="pre">.qt</span></code> - quality trimmed</li>
<li><code class="docutils literal"><span class="pre">.sb</span></code> - split by barcodes</li>
<li><code class="docutils literal"><span class="pre">.lt</span></code> - length trimmed</li>
</ul>
</div>
<div class="section" id="getting-help">
<h2>Getting help<a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re still getting an error, you can email Claire and Thomas
for help with your problem. You can also email the alm-comp [at] mit.edu
email list to see if others have encountered something similar.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Quickstart</a><ul>
<li><a class="reference internal" href="#prepare-your-data">Prepare your data</a><ul>
<li><a class="reference internal" href="#summary-file">Summary file</a></li>
<li><a class="reference internal" href="#data">Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#run-the-pipeline">Run the pipeline</a></li>
<li><a class="reference internal" href="#troubleshooting-and-logs">Troubleshooting and logs</a></li>
<li><a class="reference internal" href="#getting-help">Getting help</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Introduction</a></li>
      <li>Next: <a href="preparing-dataset.html" title="next chapter">Preparing your dataset for processing</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickstart.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Thomas Gurry and Claire Duvallet.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/quickstart.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>